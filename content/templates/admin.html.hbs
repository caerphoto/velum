{{> header}}

<header>
  <div class="home link-box">
    <a href="/" class="index-link">home</a>
  </div>
  <div class="logout link-box">
    <form action="/logout" method="POST">
      <button type="submit">Log out</button>
    </form>
  </div>
  <h1>Blog Admin</h1>
</header>

<article>
  <section id="admin-article-manager" class="admin-main-section">
    <h2>Articles:</h2>

    <form action="/rebuild" method="POST" class="main-section-form">
      <button type="submit">Rebuild article index</button>
    </form>

    <ol class="admin-article-list" reversed>
      {{#each articles}}
      <li class="admin-article-list_item" data-slug="{{this.slug}}">
        <a data-slug="{{this.slug}}" href="#{{this.slug}}">{{this.title}}</a>
        <a href="/articles/{{this.slug}}" target="velum-{{this.slug}}" class="admin-open-article-link">open in new tab â†—</a>
        <button type="button" data-slug="{{this.slug}}" data-title="{{this.title}}"class="delete">Delete</button>
        <br>
        <span class="date">{{date_from_timestamp this.timestamp}}</span>
      </li>
      {{/each}}
    </ol>
  </section>

  <section id="admin-article-editor" class="admin-main-section">
    <h2>Edit article:</h2>

    <p id="save-success">Saved!</p>
    <form action="/article" data-method="PUT" id="save-article" class="main-section-form">
      <button type="submit">Save</button>
    </form>

    <textarea class="article-editor"></textarea>
  </section>
</article>

<script src="/assets/admin.js"></script>
{{> footer}}
